<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>æ›¼é™€ç¾…ä¹å®®æ ¼ç”Ÿæˆå™¨ (Mandala Chart) </title>
    <meta name="description" content="åŸºæ–¼èªçŸ¥å¿ƒç†å­¸(Cognitive Psychology)è¨­è¨ˆçš„æ›¼é™€ç¾…ä¹å®®æ ¼å·¥å…·ã€‚åˆ©ç”¨é›™é‡ç·¨ç¢¼(Dual Coding)èˆ‡é™ä½èªçŸ¥è² è·(Cognitive Load)åŸç†ï¼Œæä¾›è‡ªå‹•æ•£å°„èˆ‡å¤šå·´èƒºé…è‰²ã€‚æ”¯æ´å¤§è°·ç¿”å¹³ç›®æ¨™é”æˆæ³•ï¼Œæ˜¯å¹´åº¦è¨ˆç•«èˆ‡å‰µæ„æ€è€ƒçš„æœ€ä½³å…è²»å·¥å…·ã€‚">
    <meta name="keywords" content="æ›¼é™€ç¾…ä¹å®®æ ¼, Mandala Chart, ç›®æ¨™ç®¡ç†, èªçŸ¥å¿ƒç†å­¸, é›™é‡ç·¨ç¢¼, å¤§è°·ç¿”å¹³, æ”¾å°„æ€§æ€è€ƒ, èºæ—‹å¼æ€è€ƒ, M-1ä¹å®®æ ¼">
    <meta name="author" content="Nova & Gemini Pro">
    
    <meta property="og:title" content="æ›¼é™€ç¾…ä¹å®®æ ¼ç”Ÿæˆå™¨ - å…¨æ–¹ä½æ€è€ƒå·¥å…·">
    <meta property="og:description" content="çµåˆè¦–è¦ºåŒ–èªçŸ¥è¼”åŠ©èˆ‡é›™è»¸æ€è€ƒçš„ç›®æ¨™é”æˆç³»çµ±ã€‚ç”± Gemini Pro å”ä½œæ‰“é€ ã€‚">
    <meta property="og:type" content="website">

    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "SoftwareApplication",
      "name": "Mandala Chart Generator",
      "author": {
        "@type": "Person",
        "name": "Nova"
      },
      "applicationCategory": "ProductivityApplication",
      "operatingSystem": "Web",
      "offers": { "@type": "Offer", "price": "0", "priceCurrency": "TWD" },
      "description": "A sophisticated Mandala Chart tool engineered with Cognitive Psychology principles. It utilizes Information Layering to reduce Cognitive Load and Dual Coding Theory (linking text with colors) for Memory Anchoring. Features distinct Radiant (Horizontal) and Spiral (Vertical) thinking modes.",
      "featureList": "Visual Cognitive Aid, Cognitive Load Reduction, Dual Coding Memory Anchoring, Radiant & Spiral Logic, Auto-scatter, Dopamine Colors, Minimalist Black/White Mode",
      "datePublished": "2026-01-20",
      "mainEntity": {
        "@type": "FAQPage",
        "mainEntity": [{
          "@type": "Question",
          "name": "ç‚ºä»€éº¼é€™å€‹å·¥å…·æœ‰åŠ©æ–¼è¨˜æ†¶?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "æœ¬å·¥å…·é‹ç”¨é›™é‡ç·¨ç¢¼(Dual Coding)åŸç†ï¼Œé€éè‰²å½©èˆ‡ç©ºé–“é…ç½®å¼·åŒ–å¤§è…¦å°æŠ½è±¡ç›®æ¨™çš„è¨˜æ†¶å®šéŒ¨ã€‚"
          }
        }]
      }
    }
    </script>
    
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><rect x=%225%22 y=%225%22 width=%2290%22 height=%2290%22 rx=%2215%22 fill=%22%236366f1%22/><path d=%22M30 30h40M30 50h40M30 70h40M30 30v40M50 30v40M70 30v40%22 stroke=%22white%22 stroke-width=%228%22 stroke-linecap=%22round%22/></svg>">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        :root {
            --bg-color: #f8fafc;
            --grid-border-color: #475569;
            --thick-border-color: #1e293b;
            --font-size-s: 0.8rem;
            --font-size-m: 1rem;
            --font-size-l: 1.3rem;
            --font-size-xl: 1.6rem;
            --current-font-size: var(--font-size-m);
        }

        body {
            font-family: "Microsoft JhengHei", "Heiti TC", "Segoe UI", Roboto, sans-serif;
            background-color: var(--bg-color);
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            color: #333;
            padding-bottom: 20px; 
        }

        .header-row {
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            width: 100%;
            max-width: 950px;
            margin-bottom: 15px;
        }

        h1 { margin: 0; color: #334155; font-size: 1.8rem; font-weight: 700; text-align: center; }

        .lang-switch {
            position: absolute;
            right: 0;
            top: 50%;
            transform: translateY(-50%);
            background: white;
            border: 1px solid #cbd5e1;
            padding: 5px 10px;
            border-radius: 6px;
            font-size: 0.85rem;
            cursor: pointer;
            color: #475569;
            font-weight: 600;
        }
        .lang-switch:hover { background: #f1f5f9; color: #6366f1; border-color: #6366f1; }

        .controls {
            background: white;
            padding: 20px;
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.06);
            margin-bottom: 25px;
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            align-items: flex-start;
            justify-content: center;
            max-width: 950px;
            width: 100%;
            box-sizing: border-box;
        }

        .control-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
            align-items: center;
        }
        
        .control-label { font-size: 0.85rem; color: #64748b; font-weight: 600; }

        .btn-group { display: flex; gap: 8px; flex-wrap: wrap; justify-content: center; }

        button {
            padding: 6px 14px;
            border: 1px solid #cbd5e1;
            background: white;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 0.9rem;
            color: #475569;
        }

        button:hover { background: #f1f5f9; }
        button.active { background: #6366f1; color: white; border-color: #6366f1; }
        .btn-primary { background: #6366f1; color: white; border: none; }
        .btn-outline { border: 1px solid #6366f1; color: #6366f1; }

        .color-picker-wrapper { display: flex; flex-direction: column; gap: 10px; }
        .palette-row { display: flex; align-items: center; gap: 6px; justify-content: center; flex-wrap: wrap; }
        .palette-name { font-size: 0.75rem; color: #94a3b8; width: 60px; text-align: right; margin-right: 4px; }
        
        .color-swatch {
            width: 24px; height: 24px; border-radius: 5px; cursor: pointer;
            border: 2px solid transparent; transition: transform 0.1s;
            box-sizing: border-box; /* ç¢ºä¿é‚Šæ¡†ä¸å½±éŸ¿å¤§å° */
        }
        .color-swatch:hover { transform: scale(1.15); border-color: rgba(0,0,0,0.2); }
        .custom-picker-row { display: flex; align-items: center; justify-content: flex-end; gap: 8px; padding-top: 5px; border-top: 1px dashed #e2e8f0; }

        #mandala-container-wrapper {
            background: white;
            padding: 10px;
            border-radius: 8px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            max-width: 800px;
            width: 100%;
            overflow: visible; 
            margin-bottom: 40px;
        }

        #mandala-container {
            border: 3px solid var(--thick-border-color);
            background-color: var(--grid-border-color);
            width: 100%;
            box-sizing: border-box;
            display: grid;
            grid-template-columns: repeat(9, 1fr);
            gap: 1px;
        }

        .cell {
            position: relative;
            background: white;
            display: flex; align-items: center; justify-content: center;
            min-height: 60px; 
            aspect-ratio: 1 / 1; 
            font-size: var(--current-font-size);
            font-weight: 500;
            box-sizing: border-box; 
        }

        @media (max-width: 600px) {
            .cell { aspect-ratio: auto; min-height: 50px; }
        }

        .cell.thick-right { border-right: 3px solid var(--thick-border-color); z-index: 1; }
        .cell.thick-bottom { border-bottom: 3px solid var(--thick-border-color); z-index: 1; }

        .editable-div {
            width: 100%; height: 100%; min-height: 100%;
            border: none; text-align: center; background: transparent;
            padding: 2px; box-sizing: border-box; outline: none;
            display: flex; align-items: center; justify-content: center;
            word-break: break-all; white-space: pre-wrap; 
            font-family: inherit; color: inherit; line-height: 1.3; 
        }

        .editable-div:empty::before {
            content: attr(data-placeholder);
            color: inherit; opacity: 0.4; pointer-events: none;
        }

        #fileInput { display: none; }

        /* Guide Section */
        .guide-section {
            max-width: 800px;
            width: 90%;
            background: white;
            padding: 40px;
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.04);
            color: #334155;
            line-height: 1.8;
            margin-bottom: 40px;
        }

        .guide-section h2 { font-size: 1.6rem; color: #1e293b; margin-bottom: 25px; border-bottom: 2px solid #e2e8f0; padding-bottom: 12px; display: flex; align-items: center; gap: 10px; }
        .guide-section h3 { font-size: 1.2rem; color: #6366f1; margin-top: 35px; margin-bottom: 15px; font-weight: 700; display: flex; align-items: center; gap: 8px;}
        .guide-section p { margin-bottom: 15px; font-size: 1rem; text-align: justify; }
        .guide-section li { margin-bottom: 8px; font-size: 1rem; }
        .guide-section ul, .guide-section ol { padding-left: 24px; margin-bottom: 20px; }
        
        .mode-box { 
            background: #f8fafc; 
            padding: 20px; 
            border-left: 5px solid #6366f1; 
            margin: 20px 0; 
            border-radius: 0 8px 8px 0; 
        }
        
        /* Footer Styles */
        .site-footer {
            margin-top: 40px;
            text-align: center;
            padding: 30px 20px;
            color: #64748b;
            background-color: rgba(255,255,255,0.5);
            width: 100%;
            font-size: 0.9rem;
        }
        .site-footer a {
            color: #6366f1;
            text-decoration: none;
            border-bottom: 1px dotted #6366f1;
            transition: all 0.2s;
        }
        .site-footer a:hover {
            color: #4f46e5;
            border-bottom: 1px solid #4f46e5;
        }

        @media (max-width: 600px) {
            body { padding: 10px; padding-bottom: 20px; }
            .header-row { flex-direction: column; gap: 10px; }
            .lang-switch { position: static; transform: none; align-self: flex-end; margin-right: 10px;}
            .controls { padding: 15px; gap: 15px; }
            .palette-name { display: none; }
            #mandala-container-wrapper { padding: 5px; }
            .guide-section { padding: 25px; width: 100%; box-sizing: border-box; }
            :root { --font-size-s: 0.7rem; --font-size-m: 0.9rem; --font-size-l: 1.1rem; --font-size-xl: 1.3rem; }
        }
    </style>
</head>
<body>

    <div class="header-row">
        <h1 data-i18n="title">æ›¼é™€ç¾…ä¹å®®æ ¼ç”Ÿæˆå™¨</h1>
        <button class="lang-switch" onclick="toggleLanguage()">En / ä¸­æ–‡</button>
    </div>

    <div class="controls">
        <div class="control-group">
            <span class="control-label" data-i18n="fontSize">å­—é«”å¤§å°</span>
            <div class="btn-group" id="fontSizeControls">
                <button onclick="setFontSize('s')" id="btn-fs-s" data-i18n="fsS">å°</button>
                <button onclick="setFontSize('m')" id="btn-fs-m" class="active" data-i18n="fsM">ä¸­</button>
                <button onclick="setFontSize('l')" id="btn-fs-l" data-i18n="fsL">å¤§</button>
                <button onclick="setFontSize('xl')" id="btn-fs-xl" data-i18n="fsXL">ç‰¹å¤§</button>
            </div>
        </div>

        <div class="control-group">
            <span class="control-label" data-i18n="colorStyle">é¢¨æ ¼è‰²ç³» (å…ˆé¸è‰² â†’ å†é»å€å¡Šä¸­å¿ƒ)</span>
            <div class="color-picker-wrapper">
                <div class="palette-row">
                    <span class="palette-name" data-i18n="pMacaron">é¦¬å¡é¾</span>
                    <div class="color-swatch" style="background: #FF9999;" onclick="pickColor('#FF9999')"></div>
                    <div class="color-swatch" style="background: #FFCC99;" onclick="pickColor('#FFCC99')"></div>
                    <div class="color-swatch" style="background: #FFF599;" onclick="pickColor('#FFF599')"></div>
                    <div class="color-swatch" style="background: #B8FFB8;" onclick="pickColor('#B8FFB8')"></div>
                    <div class="color-swatch" style="background: #99FFFF;" onclick="pickColor('#99FFFF')"></div>
                    <div class="color-swatch" style="background: #99CCFF;" onclick="pickColor('#99CCFF')"></div>
                    <div class="color-swatch" style="background: #CC99FF;" onclick="pickColor('#CC99FF')"></div>
                    <div class="color-swatch" style="background: #FF99CC;" onclick="pickColor('#FF99CC')"></div>
                </div>
                <div class="palette-row">
                    <span class="palette-name" data-i18n="pDopamine">å¤šå·´èƒº</span>
                    <div class="color-swatch" style="background: #FF0055;" onclick="pickColor('#FF0055')"></div>
                    <div class="color-swatch" style="background: #FF5500;" onclick="pickColor('#FF5500')"></div>
                    <div class="color-swatch" style="background: #FFDD00;" onclick="pickColor('#FFDD00')"></div>
                    <div class="color-swatch" style="background: #00FF33;" onclick="pickColor('#00FF33')"></div>
                    <div class="color-swatch" style="background: #00DDFF;" onclick="pickColor('#00DDFF')"></div>
                    <div class="color-swatch" style="background: #0055FF;" onclick="pickColor('#0055FF')"></div>
                    <div class="color-swatch" style="background: #AA00FF;" onclick="pickColor('#AA00FF')"></div>
                    <div class="color-swatch" style="background: #FF00AA;" onclick="pickColor('#FF00AA')"></div>
                    <div class="color-swatch" style="background: #000000;" onclick="pickColor('#000000')"></div>
                </div>
                <div class="palette-row">
                    <span class="palette-name" data-i18n="pMorandi">è«è˜­è¿ª</span>
                    <div class="color-swatch" style="background: #D3C4BE;" onclick="pickColor('#D3C4BE')"></div>
                    <div class="color-swatch" style="background: #B4A5A5;" onclick="pickColor('#B4A5A5')"></div>
                    <div class="color-swatch" style="background: #8C9A9E;" onclick="pickColor('#8C9A9E')"></div>
                    <div class="color-swatch" style="background: #989F86;" onclick="pickColor('#989F86')"></div>
                    <div class="color-swatch" style="background: #B0A695;" onclick="pickColor('#B0A695')"></div>
                    <div class="color-swatch" style="background: #7E8088;" onclick="pickColor('#7E8088')"></div>
                    <div class="color-swatch" style="background: #A79086;" onclick="pickColor('#A79086')"></div>
                    <div class="color-swatch" style="background: #606c78;" onclick="pickColor('#606c78')"></div>
                    <div class="color-swatch" style="background: #ffffff; border: 1px solid #e2e8f0;" onclick="pickColor('#ffffff')"></div>
                </div>
                <div class="palette-row">
                    <span class="palette-name" data-i18n="pEarth">å¤§åœ°è‰²</span>
                    <div class="color-swatch" style="background: #D4A373;" onclick="pickColor('#D4A373')"></div>
                    <div class="color-swatch" style="background: #CCD5AE;" onclick="pickColor('#CCD5AE')"></div>
                    <div class="color-swatch" style="background: #E9EDC9;" onclick="pickColor('#E9EDC9')"></div>
                    <div class="color-swatch" style="background: #FAEDCD;" onclick="pickColor('#FAEDCD')"></div>
                    <div class="color-swatch" style="background: #A98467;" onclick="pickColor('#A98467')"></div>
                    <div class="color-swatch" style="background: #6C584C;" onclick="pickColor('#6C584C')"></div>
                    <div class="color-swatch" style="background: #588157;" onclick="pickColor('#588157')"></div>
                    <div class="color-swatch" style="background: #3A5A40;" onclick="pickColor('#3A5A40')"></div>
                </div>
                <div class="custom-picker-row">
                    <span style="font-size: 0.8rem; color:#888;" data-i18n="customColor">è‡ªè¨‚é¡è‰²:</span>
                    <input type="color" id="colorPicker" value="#99CCFF" style="cursor: pointer; height: 24px; width: 40px; padding: 0; border: 1px solid #ccc; border-radius: 4px;">
                </div>
            </div>
        </div>

        <div class="control-group">
            <span class="control-label" data-i18n="actions">å­˜å–èˆ‡ä¸‹è¼‰</span>
            <div class="btn-group">
                <button class="btn-outline" onclick="exportData()" data-i18n="btnExport">åŒ¯å‡º</button>
                <button class="btn-outline" onclick="document.getElementById('fileInput').click()" data-i18n="btnImport">åŒ¯å…¥</button>
                <button class="btn-primary" onclick="downloadImage()" data-i18n="btnDownload">ä¸‹è¼‰åœ–ç‰‡</button>
            </div>
        </div>
    </div>

    <input type="file" id="fileInput" accept=".json" onchange="importData(this)">

    <div id="mandala-container-wrapper">
        <div id="mandala-container" id="mainGrid"></div>
    </div>

    <article class="guide-section" id="guideSection">
        </article>

    <footer class="site-footer">
        <p data-i18n="footerCredits">
            ç”± GitHub éƒ¨ç½² | Gemini Pro å‚¾åŠ›æ‰“é€  | <a href="mailto:babelon1882@gmail.com">Nova</a> æœ€å¾Œæ›´æ–°æ–¼ 2026
        </p>
    </footer>

    <script>
        const translations = {
            zh: {
                title: 'æ›¼é™€ç¾…ä¹å®®æ ¼ç”Ÿæˆå™¨',
                fontSize: 'å­—é«”å¤§å°',
                fsS: 'å°', fsM: 'ä¸­', fsL: 'å¤§', fsXL: 'ç‰¹å¤§',
                colorStyle: 'é¢¨æ ¼è‰²ç³» (å…ˆé¸è‰² â†’ å†é»å€å¡Šä¸­å¿ƒ)',
                pMacaron: 'é¦¬å¡é¾', pDopamine: 'å¤šå·´èƒº', pMorandi: 'è«è˜­è¿ª', pEarth: 'å¤§åœ°è‰²',
                customColor: 'è‡ªè¨‚é¡è‰²:',
                actions: 'å­˜å–èˆ‡ä¸‹è¼‰',
                btnExport: 'åŒ¯å‡º', btnImport: 'åŒ¯å…¥', btnDownload: 'ä¸‹è¼‰åœ–ç‰‡',
                coreGoal: 'æ ¸å¿ƒç›®æ¨™', subGoal: 'æ¬¡ç›®æ¨™',
                alertImportSuccess: 'åŒ¯å…¥æˆåŠŸ', alertFormatError: 'æ ¼å¼éŒ¯èª¤', alertFileError: 'æª”æ¡ˆéŒ¯èª¤',
                footerCredits: 'ç”± GitHub éƒ¨ç½² | Gemini Pro å‚¾åŠ›æ‰“é€  | <a href="mailto:babelon1882@gmail.com">Nova</a> æœ€å¾Œæ›´æ–°æ–¼ 2026',
                guideHTML: `
                    <h2>ğŸ§© ä»€éº¼æ˜¯æ›¼é™€ç¾…æ€è€ƒæ³•ï¼Ÿ</h2>
                    <p>é€™ä¸åƒ…åƒ…æ˜¯ä¸€å€‹ä¹å®®æ ¼ï¼Œå®ƒæ˜¯ä¸€å¥—èƒ½å°‡ <strong>æŠ½è±¡ç›®æ¨™</strong> è½‰åŒ–ç‚º <strong>å…·é«”è¡Œå‹•</strong> çš„æ€ç¶­å°èˆªç³»çµ±ã€‚é€é 3x3 çš„çŸ©é™£çµæ§‹ï¼Œå¼·åˆ¶å¤§è…¦åœ¨æœ‰é™çš„ç©ºé–“å…§é€²è¡Œç„¡é™çš„å»¶ä¼¸ï¼Œå¹«åŠ©ä½¿ç”¨è€…åœ¨æ··æ²Œçš„è³‡è¨Šä¸­å»ºç«‹ç§©åºã€‚</p>
                    
                    <h2>ğŸ“œ èµ·æºèˆ‡å“²å­¸ (Origin & Philosophy)</h2>
                    
                    <h3>A. å‰µå§‹èˆ‡ç™¼å±•</h3>
                    <p>æ›¼é™€ç¾…æ€è€ƒæ³•ï¼ˆMandal Chart / Mandala Thinkingï¼‰æºæ–¼ <strong>1979 å¹´</strong>ï¼Œç”±æ—¥æœ¬ <strong>Clover ç®¡ç†ç ”ç©¶æ‰€</strong> çš„ <strong>æ¾æ‘å¯§é›„ (Yasuo Matsumura)</strong> å…ˆç”Ÿæ‰€é–‹ç™¼ã€‚</p>

                    <h3>B. è¨­è¨ˆé‚è¼¯ï¼šæ±æ–¹æ™ºæ…§çš„ç³»çµ±åŒ–</h3>
                    <p>å…¶éˆæ„Ÿå–è‡ªä½›æ•™å¯†å®—çš„ <strong>ã€Œæ›¼é™€ç¾… (Mandala)ã€</strong> åœ–é¨°ã€‚Mandala åœ¨æ¢µèªä¸­æ„ç‚ºã€Œåœ“ã€æˆ–ã€Œæœ¬è³ªã€ï¼Œè±¡å¾µè‘—å®‡å®™çš„å®Œæ•´æ€§ã€‚</p>
                    <p>æ¾æ‘å¯§é›„å°‡æ­¤æ¦‚å¿µè½‰åŒ–ç‚ºå•†æ¥­èˆ‡é‚è¼¯å·¥å…·ï¼Œå°‡ã€Œä¸­å¿ƒã€è¦–ç‚ºæ ¸å¿ƒæœ¬è³ªï¼Œå°‡ã€Œå‘¨åœã€è¦–ç‚ºç„¡é™è¡ç”Ÿçš„ç¾è±¡ã€‚å®ƒæ‰“ç ´äº†å‚³çµ±ç·šæ€§ç­†è¨˜ï¼ˆLinear Note-takingï¼‰çš„ä¾·é™ï¼Œè®“æ€è€ƒå›æ­¸å¤§è…¦æœ€è‡ªç„¶çš„ <strong>ã€Œè¼»å°„ç‹€ (Radiant)ã€</strong> é‹ä½œæ¨¡å¼ã€‚</p>

                    <h3>C. ç¾ä»£æ‡‰ç”¨ï¼šå¾ç®¡ç†åˆ°å“è¶Š</h3>
                    <p>æ­¤æ–¹æ³•åŸç”¨æ–¼ä¼æ¥­ç®¡ç†èˆ‡ç¸¾æ•ˆè€ƒæ ¸ï¼Œå¾Œå› ç¾åœ‹è·æ£’å¤§è¯ç›Ÿï¼ˆMLBï¼‰çƒæ˜Ÿ <strong>å¤§è°·ç¿”å¹³ (Shohei Ohtani)</strong> åœ¨é«˜ä¸­æ™‚æœŸåˆ©ç”¨æ­¤è¡¨ï¼ˆå¸¸è¢«ç¨±ç‚ºã€Œç›®æ¨™é”æˆä¹å®®æ ¼ã€ï¼‰æˆåŠŸè¦åŠƒå‡ºé‚å‘ä¸–ç•Œç´šé¸æ‰‹çš„è·¯å¾‘è€Œå»£ç‚ºäººçŸ¥ã€‚å®ƒè­‰æ˜äº†æ›¼é™€ç¾…æ€è€ƒæ³•åœ¨ <strong>ã€Œå€‹äººç›®æ¨™ç®¡ç†ã€</strong> èˆ‡ <strong>ã€Œæ½›èƒ½é–‹ç™¼ã€</strong> ä¸Šçš„å“è¶Šæˆæ•ˆã€‚</p>

                    <h2>ğŸ§  é›™è»¸æ€ç¶­æ•´åˆï¼šæ°´å¹³èˆ‡å‚ç›´çš„äº¤éŸ¿</h2>
                    <p>æ›¼é™€ç¾…çš„å¼·å¤§ä¹‹è™•ï¼Œåœ¨æ–¼å®ƒåŒæ™‚æ•´åˆäº†å…©ç¨®ç¶­åº¦çš„æ€è€ƒæ¨¡å¼ï¼š</p>
                    <ul>
                        <li><strong>æ°´å¹³æ€è€ƒ (Lateral Thinking) â€”â€” å»£åº¦çš„æ¢ç´¢ï¼š</strong>ç•¶ä½ ç«™åœ¨ä¸­å¿ƒï¼ˆæ ¸å¿ƒä¸»é¡Œï¼‰å‘å¤–è§€çœ‹ï¼Œå‘¨åœçš„å…«å€‹æ ¼å­ä»£è¡¨äº†ã€Œå»£åº¦ã€ã€‚å®ƒå¼·è¿«ä½ å»ç™¼æ˜èˆ‡ä¸»é¡Œç›¸é—œçš„å…«å€‹ä¸åŒé¢å‘æˆ–é¡åˆ¥ï¼Œæ‰“ç ´å–®ä¸€è¦–è§’çš„ç›²é»ã€‚</li>
                        <li><strong>å‚ç›´æ€è€ƒ (Vertical Thinking) â€”â€” æ·±åº¦çš„æŒ–æ˜ï¼š</strong>ç•¶ä½ é¸å®šå‘¨åœä»»ä¸€æ ¼å­ä½œç‚ºæ¬¡ä¸»é¡Œï¼Œä¸¦å°‡å…¶å±•é–‹ç‚ºå¦ä¸€å€‹ä¹å®®æ ¼æ™‚ï¼Œé€™å°±æ˜¯ã€Œæ·±åº¦ã€ã€‚å®ƒè¦æ±‚ä½ é‡å°è©²é¢å‘æå‡ºå…·é«”çš„åŸ·è¡Œæ–¹æ¡ˆã€KPI æˆ–ç´°ç¯€ï¼Œå°‡æ¦‚å¿µè½å¯¦ç‚ºè¡Œå‹•ã€‚</li>
                    </ul>

                    <h2>ğŸ›¤ï¸ å…©å¤§å¡«å¯«ç­–ç•¥ï¼šæ”¾å°„æ€§ vs. èºæ—‹å¼</h2>
                    <p>æ ¹æ“šä½ çš„ç›®æ¨™å±¬æ€§ï¼Œé¸æ“‡æœ€é©åˆçš„æ€ç¶­è·¯å¾‘ï¼š</p>

                    <div class="mode-box">
                        <h3>ğŸŒŸ æ¨¡å¼ä¸€ï¼šæ”¾å°„æ€§/æ°´å¹³æ€è€ƒ (Radiant / Horizontal)</h3>
                        <p><strong>é©ç”¨æƒ…å¢ƒï¼š</strong>å‰µæ„ç™¼æƒ³ã€éˆæ„Ÿæ•æ‰ã€å¹´åº¦ç›®æ¨™è¨­å®šã€‚<br>
                        <strong>è·¯å¾‘ï¼š</strong>å¾ä¸­å¿ƒå‡ºç™¼ï¼Œè‡ªç”±è·³èºè‡³å‘¨åœä»»æ„æ ¼å­ã€‚<br>
                        <strong>æ‡‰ç”¨å ´æ™¯ï¼š</strong>è…¦åŠ›æ¿€ç›ª (Brainstorming)ã€ç”¢å“åŠŸèƒ½ç™¼æƒ³ã€å¤¢æƒ³ç‰ˆã€è‡ªæˆ‘æˆé•·ç›®æ¨™è¨­å®šã€‚<br>
                        <strong>å„ªå‹¢ï¼š</strong>ä¸å—é †åºé™åˆ¶ï¼Œæœ€å¤§åŒ–è¯æƒ³åŠ›ï¼Œæ•æ‰ç¨ç¸±å³é€çš„éˆæ„Ÿç«èŠ±ã€‚</p>
                    </div>

                    <div class="mode-box">
                        <h3>ğŸŒ€ æ¨¡å¼äºŒï¼šèºæ—‹å¼/å‚ç›´æ€è€ƒ (Spiral / Vertical)</h3>
                        <p><strong>é©ç”¨æƒ…å¢ƒï¼š</strong>æµç¨‹è¦åŠƒã€å•é¡Œæ‹†è§£ã€æ·±åº¦æ¢ç©¶ã€è®€æ›¸ç­†è¨˜ã€‚<br>
                        <strong>è·¯å¾‘ï¼š</strong>å¾ä¸­å¿ƒå‡ºç™¼ï¼Œä¾ç…§é †æ™‚é‡æ–¹å‘ï¼ˆé€šå¸¸ç”±æ­£ä¸Šæ–¹æˆ–æ­£ä¸‹æ–¹é–‹å§‹ï¼‰ä¾åºï¼ˆæ™‚é–“/æµç¨‹/æ­¥é©Ÿï¼‰å¡«å¯«ã€‚<br>
                        <strong>æ‡‰ç”¨å ´æ™¯ï¼š</strong>å°ˆæ¡ˆæ™‚ç¨‹å®‰æ’ (Timeline)ã€å‰–æå•é¡Œæˆå› ã€æ•…äº‹è…³æœ¬èµ·æ‰¿è½‰åˆã€è‡ªæˆ‘æå‡çš„å„ªå…ˆé †åºã€‚<br>
                        <strong>å„ªå‹¢ï¼š</strong>å»ºç«‹å¼·çƒˆçš„é‚è¼¯é€£è²«æ€§èˆ‡å› æœé—œä¿‚ï¼Œè®“æ€è€ƒå…·æœ‰æ™‚é–“è»¸æˆ–å„ªå…ˆç´šçš„æ¬Šé‡ã€‚</p>
                    </div>

                    <h2>ğŸš€ å¦‚ä½•ä½¿ç”¨æ­¤å·¥å…·</h2>
                    <ul>
                        <li><strong>è¨­å®šæ ¸å¿ƒï¼š</strong>åœ¨æ­£ä¸­å¤®è¼¸å…¥æ‚¨çš„ä¸»é¡Œã€‚</li>
                        <li><strong>ç™¼æ•£æˆ–æ’åºï¼š</strong>ä¾æ“šæ‚¨çš„æ€ç¶­æ¨¡å¼ï¼Œåœ¨å‘¨åœ 8 æ ¼å¡«å…¥é—œéµå­—ã€‚</li>
                        <li><strong>è‡ªå‹•é€£å‹•ï¼š</strong>ç³»çµ±æœƒè‡ªå‹•å°‡é€™ 8 å€‹é—œéµå­—å¸¶å…¥å¤–åœä¹å®®æ ¼çš„ä¸­å¿ƒï¼Œçœå»é‡è¤‡æŠ„å¯«çš„æ™‚é–“ã€‚</li>
                        <li><strong>æ·±åŒ–å…§å®¹ï¼š</strong>åœ¨å¤–åœæ ¼å­ä¸­å¡«å¯«å…·é«”åŸ·è¡Œæ–¹æ¡ˆ (Action Items)ã€‚</li>
                        <li><strong>è¦–è¦ºåŒ–ç®¡ç†ï¼š</strong>å–„ç”¨ã€Œå¤šå·´èƒºè‰²ã€ä¾†æ¿€å‹µå‹•åŠ›ï¼Œæˆ–ã€Œè«è˜­è¿ªè‰²ã€ä¾†ä¿æŒå°ˆæ³¨ï¼Œå¼·åŒ–è¨˜æ†¶å®šéŒ¨ã€‚</li>
                    </ul>
                `
            },
            en: {
                title: 'Mandala Chart Generator',
                fontSize: 'Font Size',
                fsS: 'Small', fsM: 'Medium', fsL: 'Large', fsXL: 'X-Large',
                colorStyle: 'Color Style (Pick Color â†’ Click Center Block)',
                pMacaron: 'Macaron', pDopamine: 'Dopamine', pMorandi: 'Morandi', pEarth: 'Earth',
                customColor: 'Custom:',
                actions: 'Actions',
                btnExport: 'Export', btnImport: 'Import', btnDownload: 'Download',
                coreGoal: 'Core Goal', subGoal: 'Sub Goal',
                alertImportSuccess: 'Import Successful!', alertFormatError: 'Invalid Format', alertFileError: 'File Error',
                footerCredits: 'Deployed via GitHub | Powered by Gemini Pro | <a href="mailto:babelon1882@gmail.com">Nova</a> Last updated 2026',
                guideHTML: `
                    <h2>ğŸ§© What is Mandala Thinking?</h2>
<p>This is more than just a 9-grid chart; it is a mental navigation system that transforms <strong>abstract goals</strong> into <strong>concrete actions</strong>. Through its 3x3 matrix structure, it forces the brain to expand limitlessly within a finite space, helping users establish order amidst chaotic information.</p>
                    
                    <h2>ğŸ“œ Origin & Philosophy</h2>
<h3>A. Founding & Development</h3>
                    <p>The Mandala Chart (Mandala Thinking) originated in <strong>1979</strong>, developed by <strong>Yasuo Matsumura</strong> of the <strong>Clover Management Research Institute</strong> in Japan.</p>

                    <h3>B. Design Logic: Systematizing Eastern Wisdom</h3>
                    <p>Its inspiration comes from the <strong>"Mandala"</strong> of Esoteric Buddhism. In Sanskrit, Mandala means "circle" or "essence," symbolizing the completeness of the universe.</p>
                    <p>Matsumura transformed this concept into a business and logical tool, viewing the "center" as the core essence and the "surroundings" as infinitely derived phenomena. It breaks the limitations of traditional Linear Note-taking, allowing thinking to return to the brain's most natural <strong>"Radiant"</strong> operating mode.</p>

                    <h3>C. Modern Application: From Management to Excellence</h3>
<p>Originally used for corporate management and performance assessment, this method became widely known after MLB superstar <strong>Shohei Ohtani</strong> used it (often called the "Goal Achievement Chart") during high school to map out his path to becoming a world-class player. It proves the excellent effectiveness of Mandala Thinking in <strong>"Personal Goal Management"</strong> and <strong>"Potential Development"</strong>.</p>
                    <h2>ğŸ§  Dual-Axis Integration</h2>
<p>The power of the Mandala Chart lies in its integration of two dimensions of thinking:</p>
                    <ul>
                        <li><strong>Lateral Thinking (Horizontal) â€” Exploration of Breadth:</strong> When you stand at the center (Core Theme) and look outward, the eight surrounding cells represent "breadth." It forces you to discover eight different facets or categories related to the theme, breaking the blind spots of a single perspective.</li>
                        <li><strong>Vertical Thinking (Depth) â€” Excavation of Depth:</strong> When you select any surrounding cell as a sub-theme and expand it into another 9-grid, this is "depth." It requires you to propose specific execution plans, KPIs, or details for that facet, implementing concepts into actions.</li>
                    </ul>

                    <h2>ğŸ›¤ï¸ Two Filling Strategies</h2>
<div class="mode-box">
                        <h3>ğŸŒŸ Mode 1: Radiant / Horizontal Thinking</h3>
                        <p><strong>Scenario:</strong> Creative brainstorming, capturing inspiration, annual goal setting.<br>
                        <strong>Path:</strong> Start from the center and jump freely to any surrounding cell.<br>
                        <strong>Applications:</strong> Brainstorming, product feature ideation, vision boards, self-growth goal setting.<br>
                        <strong>Advantage:</strong> Unrestricted by order, maximizes associative power, captures fleeting sparks of inspiration.</p>
                    </div>
<div class="mode-box">
                        <h3>ğŸŒ€ Mode 2: Spiral / Vertical Thinking</h3>
                        <p><strong>Scenario:</strong> Process planning, problem decomposition, deep dives, study notes.<br>
                        <strong>Path:</strong> Start from the center and fill in order (time/process/step) in a clockwise direction (usually starting from the top or bottom).<br>
                        <strong>Applications:</strong> Project timelines, analyzing causes of problems, storyboarding, prioritizing self-improvement.<br>
                        <strong>Advantage:</strong> Establishes strong logical coherence and causality, giving thinking the weight of timelines or priorities.</p>
                    </div>

                    <h2>ğŸš€ How to Use</h2>
<ul>
                        <li><strong>Set Core:</strong> Enter your theme in the center.</li>
                        <li><strong>Radiate or Order:</strong> Fill in keywords in the surrounding 8 cells based on your thinking mode.</li>
                        <li><strong>Auto-Link:</strong> The system automatically carries these 8 keywords to the centers of the outer grids, saving rewriting time.</li>
                        <li><strong>Deepen Content:</strong> Fill in specific Action Items in the outer grids.</li>
                        <li><strong>Visual Management:</strong> Use "Dopamine Colors" for motivation or "Morandi Colors" for focus, creating color and block memory.</li>
                    </ul>
                `
            }
        };

        let currentLang = 'zh'; 
        
        let state = {
            blocks: Array(9).fill().map(() => ({ color: '#ffffff' })),
            cells: Array(81).fill('') 
        };

        const mainGrid = document.getElementById('mandala-container');
        const colorPicker = document.getElementById('colorPicker');

        function init() { 
            updateLanguageUI();
            renderGrid(); 
        }

        function toggleLanguage() {
            currentLang = currentLang === 'zh' ? 'en' : 'zh';
            updateLanguageUI();
            renderGrid();
        }

        function updateLanguageUI() {
            const t = translations[currentLang];
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                if (t[key]) el.innerHTML = t[key];
            });
            document.getElementById('guideSection').innerHTML = t.guideHTML;
        }

        function renderGrid() {
            mainGrid.innerHTML = '';
            const t = translations[currentLang];
            
            for (let i = 0; i < 81; i++) {
                const row = Math.floor(i / 9);
                const col = i % 9;
                const blockRow = Math.floor(row / 3);
                const blockCol = Math.floor(col / 3);
                const blockIndex = blockRow * 3 + blockCol;
                
                const innerRow = row % 3;
                const innerCol = col % 3;
                const cellIndexInBlock = innerRow * 3 + innerCol;

                const baseColor = state.blocks[blockIndex].color;
                let centerColor, surroundColor;
                if (baseColor.toLowerCase() === '#ffffff') {
                    centerColor = '#ffffff'; surroundColor = '#ffffff';
                } else {
                    centerColor = saturateColor(baseColor, 0.05);
                    surroundColor = lightenColor(baseColor, 0.87);
                }

                const isCenterOfBlock = (cellIndexInBlock === 4);
                let finalBgColor = isCenterOfBlock ? centerColor : surroundColor;

                const cell = document.createElement('div');
                cell.className = 'cell';
                
                if (col === 2 || col === 5) cell.classList.add('thick-right');
                if (row === 2 || row === 5) cell.classList.add('thick-bottom');

                cell.style.backgroundColor = finalBgColor;
                cell.style.color = getContrastYIQ(finalBgColor);

                const editableDiv = document.createElement('div');
                editableDiv.className = 'editable-div';
                editableDiv.contentEditable = "true";
                editableDiv.innerText = state.cells[i];
                
                let placeholder = "";
                if (isCenterOfBlock) {
                    placeholder = (blockIndex === 4) ? t.coreGoal : t.subGoal;
                }
                editableDiv.setAttribute('data-placeholder', placeholder);
                
                editableDiv.id = `cell-${i}`;
                
                editableDiv.addEventListener('input', (e) => {
                    const newVal = e.target.innerText;
                    state.cells[i] = newVal;

                    if (blockIndex === 4 && !isCenterOfBlock) {
                        const targetBlockIndex = cellIndexInBlock; 
                        const targetBlockRow = Math.floor(targetBlockIndex / 3);
                        const targetBlockCol = targetBlockIndex % 3;
                        const globalTargetRow = targetBlockRow * 3 + 1;
                        const globalTargetCol = targetBlockCol * 3 + 1;
                        const targetGlobalIndex = globalTargetRow * 9 + globalTargetCol;

                        state.cells[targetGlobalIndex] = newVal;
                        const targetDiv = document.getElementById(`cell-${targetGlobalIndex}`);
                        if (targetDiv) targetDiv.innerText = newVal;
                    }
                });

                if (isCenterOfBlock) {
                    editableDiv.addEventListener('click', () => {
                        applyColorToBlock(blockIndex, colorPicker.value);
                    });
                } else {
                    cell.addEventListener('click', (e) => {
                         if (e.target === cell) editableDiv.focus();
                    });
                }

                cell.appendChild(editableDiv);
                mainGrid.appendChild(cell);
            }
        }

        colorPicker.addEventListener('input', (e) => { });
        function pickColor(color) { colorPicker.value = color; }

        function applyColorToBlock(blockIndex, color) {
            state.blocks[blockIndex].color = color;
            renderGrid();
            setTimeout(() => {
                const blockRow = Math.floor(blockIndex / 3);
                const blockCol = blockIndex % 3;
                const centerGlobalIndex = (blockRow * 3 + 1) * 9 + (blockCol * 3 + 1);
                
                const targetDiv = document.getElementById(`cell-${centerGlobalIndex}`);
                if (targetDiv) targetDiv.focus();
            }, 0);
        }

        function setFontSize(size) {
            const root = document.documentElement;
            document.querySelectorAll('#fontSizeControls button').forEach(b => b.classList.remove('active'));
            document.getElementById(`btn-fs-${size}`).classList.add('active');
            let newSize = '1rem';
            if (size === 's') newSize = varStyle('--font-size-s');
            if (size === 'm') newSize = varStyle('--font-size-m');
            if (size === 'l') newSize = varStyle('--font-size-l');
            if (size === 'xl') newSize = varStyle('--font-size-xl');
            root.style.setProperty('--current-font-size', newSize);
        }
        
        function varStyle(name) { return getComputedStyle(document.documentElement).getPropertyValue(name).trim(); }

        function downloadImage() {
            const container = document.getElementById('mandala-container');
            const editables = container.querySelectorAll('.editable-div');
            editables.forEach(el => el.contentEditable = "false");
            
            html2canvas(container, { scale: 3, backgroundColor: null, logging: false, useCORS: true }).then(canvas => {
                editables.forEach(el => el.contentEditable = "true");
                const link = document.createElement('a');
                link.download = 'Mandala_Chart.png';
                link.href = canvas.toDataURL('image/png');
                link.click();
            });
        }

        function exportData() {
            const dataStr = "data:text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(state));
            const node = document.createElement('a');
            node.setAttribute("href", dataStr);
            node.setAttribute("download", "mandala_data.json");
            document.body.appendChild(node);
            node.click();
            node.remove();
        }

        function importData(input) {
            const t = translations[currentLang];
            const file = input.files[0];
            if (!file) return;
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const d = JSON.parse(e.target.result);
                    if (d && d.blocks && d.cells) { state = d; renderGrid(); alert(t.alertImportSuccess); } 
                    else alert(t.alertFormatError);
                } catch (er) { alert(t.alertFileError); }
                input.value = '';
            };
            reader.readAsText(file);
        }

        function saturateColor(hex, amount) {
            hex = hex.replace('#', '');
            let r = parseInt(hex.substring(0,2), 16);
            let g = parseInt(hex.substring(2,4), 16);
            let b = parseInt(hex.substring(4,6), 16);
            let hsl = rgbToHsl(r, g, b);
            hsl[1] = Math.min(1, Math.max(0, hsl[1] + amount));
            let rgb = hslToRgb(hsl[0], hsl[1], hsl[2]);
            return "#" + ((1 << 24) + (rgb[0] << 16) + (rgb[1] << 8) + rgb[2]).toString(16).slice(1);
        }

        function lightenColor(hex, amount) {
            hex = hex.replace('#', '');
            let r = parseInt(hex.substring(0,2), 16), g = parseInt(hex.substring(2,4), 16), b = parseInt(hex.substring(4,6), 16);
            r = Math.round(r + (255 - r) * amount);
            g = Math.round(g + (255 - g) * amount);
            b = Math.round(b + (255 - b) * amount);
            return "#" + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1).padStart(6, '0');
        }

        function getContrastYIQ(hexcolor){
            hexcolor = hexcolor.replace("#", "");
            if (hexcolor.length === 3) hexcolor = hexcolor.split('').map(c => c + c).join('');
            var r = parseInt(hexcolor.substr(0,2),16);
            var g = parseInt(hexcolor.substr(2,2),16);
            var b = parseInt(hexcolor.substr(4,2),16);
            var yiq = ((r*299)+(g*587)+(b*114))/1000;
            return (yiq >= 160) ? '#334155' : '#ffffff'; 
        }

        function rgbToHsl(r, g, b) {
            r /= 255, g /= 255, b /= 255;
            var max = Math.max(r, g, b), min = Math.min(r, g, b);
            var h, s, l = (max + min) / 2;
            if (max == min) { h = s = 0; } else {
                var d = max - min;
                s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
                switch (max) {
                    case r: h = (g - b) / d + (g < b ? 6 : 0); break;
                    case g: h = (b - r) / d + 2; break;
                    case b: h = (r - g) / d + 4; break;
                }
                h /= 6;
            }
            return [h, s, l];
        }

        function hslToRgb(h, s, l) {
            var r, g, b;
            if (s == 0) { r = g = b = l; } else {
                function hue2rgb(p, q, t) {
                    if (t < 0) t += 1; if (t > 1) t -= 1;
                    if (t < 1/6) return p + (q - p) * 6 * t;
                    if (t < 1/2) return q;
                    if (t < 2/3) return p + (q - p) * (2/3 - t) * 6;
                    return p;
                }
                var q = l < 0.5 ? l * (1 + s) : l + s - l * s;
                var p = 2 * l - q;
                r = hue2rgb(p, q, h + 1/3);
                g = hue2rgb(p, q, h);
                b = hue2rgb(p, q, h - 1/3);
            }
            return [Math.round(r * 255), Math.round(g * 255), Math.round(b * 255)];
        }

        init();
    </script>
</body>
</html>